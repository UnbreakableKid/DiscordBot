import * as tar from "../tar/mod.ts";
import { gzipFile, gunzipFile } from "../gzip/gzip_file.ts";
import { path } from "../deps.ts";
export async function uncompress(src, dest) {
    const filename = path.basename(src);
    const tmpDir = await Deno.makeTempDir();
    const tmpPath = path.join(tmpDir, filename);
    await gunzipFile(src, tmpPath);
    await tar.uncompress(tmpPath, dest);
    await Deno.remove(tmpDir, {
        recursive: true
    });
}
export async function compress(src, dest, options) {
    const filename = path.basename(src);
    const tmpDir = await Deno.makeTempDir();
    const tmpPath = path.join(tmpDir, filename);
    await tar.compress(src, tmpPath, options);
    await gzipFile(tmpPath, dest);
    await Deno.remove(tmpDir, {
        recursive: true
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjxodHRwczovL2Rlbm8ubGFuZC94L2NvbXByZXNzQHYwLjMuNi90Z3ovbW9kLnRzPiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB0YXIgZnJvbSBcIi4uL3Rhci9tb2QudHNcIjtcbmltcG9ydCB7IGd6aXBGaWxlLCBndW56aXBGaWxlIH0gZnJvbSBcIi4uL2d6aXAvZ3ppcF9maWxlLnRzXCI7XG5pbXBvcnQgdHlwZSB7IGNvbXByZXNzSW50ZXJmYWNlIH0gZnJvbSBcIi4uL2ludGVyZmFjZS50c1wiO1xuaW1wb3J0IHsgcGF0aCB9IGZyb20gXCIuLi9kZXBzLnRzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1bmNvbXByZXNzKHNyYzogc3RyaW5nLCBkZXN0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgZmlsZW5hbWUgPSBwYXRoLmJhc2VuYW1lKHNyYyk7XG4gIGNvbnN0IHRtcERpciA9IGF3YWl0IERlbm8ubWFrZVRlbXBEaXIoKTtcbiAgY29uc3QgdG1wUGF0aCA9IHBhdGguam9pbih0bXBEaXIsIGZpbGVuYW1lKTtcbiAgYXdhaXQgZ3VuemlwRmlsZShzcmMsIHRtcFBhdGgpO1xuICBhd2FpdCB0YXIudW5jb21wcmVzcyh0bXBQYXRoLCBkZXN0KTtcbiAgYXdhaXQgRGVuby5yZW1vdmUodG1wRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXByZXNzKFxuICBzcmM6IHN0cmluZyxcbiAgZGVzdDogc3RyaW5nLFxuICBvcHRpb25zPzogY29tcHJlc3NJbnRlcmZhY2UsXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgZmlsZW5hbWUgPSBwYXRoLmJhc2VuYW1lKHNyYyk7XG4gIGNvbnN0IHRtcERpciA9IGF3YWl0IERlbm8ubWFrZVRlbXBEaXIoKTtcbiAgY29uc3QgdG1wUGF0aCA9IHBhdGguam9pbih0bXBEaXIsIGZpbGVuYW1lKTtcbiAgYXdhaXQgdGFyLmNvbXByZXNzKHNyYywgdG1wUGF0aCwgb3B0aW9ucyk7XG4gIGF3YWl0IGd6aXBGaWxlKHRtcFBhdGgsIGRlc3QpO1xuICBhd2FpdCBEZW5vLnJlbW92ZSh0bXBEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJZQUFZLEdBQUcsT0FBTSxhQUFlO1NBQzNCLFFBQVEsRUFBRSxVQUFVLFNBQVEsb0JBQXNCO1NBRWxELElBQUksU0FBUSxVQUFZO3NCQUVYLFVBQVUsQ0FBQyxHQUFXLEVBQUUsSUFBWTtVQUNsRCxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHO1VBQzVCLE1BQU0sU0FBUyxJQUFJLENBQUMsV0FBVztVQUMvQixPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUTtVQUNwQyxVQUFVLENBQUMsR0FBRyxFQUFFLE9BQU87VUFDdkIsR0FBRyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsSUFBSTtVQUM1QixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU07UUFBSSxTQUFTLEVBQUUsSUFBSTs7O3NCQUd2QixRQUFRLENBQzVCLEdBQVcsRUFDWCxJQUFZLEVBQ1osT0FBMkI7VUFFckIsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRztVQUM1QixNQUFNLFNBQVMsSUFBSSxDQUFDLFdBQVc7VUFDL0IsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFFBQVE7VUFDcEMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLE9BQU87VUFDbEMsUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJO1VBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTTtRQUFJLFNBQVMsRUFBRSxJQUFJIn0=