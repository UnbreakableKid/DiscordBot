import { eventHandlers } from "../../bot.ts";
import { cacheHandlers } from "../../cache.ts";
import { structures } from "../../structures/mod.ts";
import { snowflakeToBigint } from "../../util/bigint.ts";
export async function handleGuildMemberAdd(data) {
    const payload = data.d;
    const guild = await cacheHandlers.get("guilds", snowflakeToBigint(payload.guildId));
    if (!guild) return;
    guild.memberCount++;
    const discordenoMember = await structures.createDiscordenoMember(payload, guild.id);
    await cacheHandlers.set("members", discordenoMember.id, discordenoMember);
    eventHandlers.guildMemberAdd?.(guild, discordenoMember);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjxodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGlzY29yZGVuby9kaXNjb3JkZW5vL21haW4vc3JjL2hhbmRsZXJzL21lbWJlcnMvR1VJTERfTUVNQkVSX0FERC50cz4iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXZlbnRIYW5kbGVycyB9IGZyb20gXCIuLi8uLi9ib3QudHNcIjtcbmltcG9ydCB7IGNhY2hlSGFuZGxlcnMgfSBmcm9tIFwiLi4vLi4vY2FjaGUudHNcIjtcbmltcG9ydCB7IHN0cnVjdHVyZXMgfSBmcm9tIFwiLi4vLi4vc3RydWN0dXJlcy9tb2QudHNcIjtcbmltcG9ydCB0eXBlIHsgRGlzY29yZEdhdGV3YXlQYXlsb2FkIH0gZnJvbSBcIi4uLy4uL3R5cGVzL2dhdGV3YXkvZ2F0ZXdheV9wYXlsb2FkLnRzXCI7XG5pbXBvcnQgdHlwZSB7IEd1aWxkTWVtYmVyQWRkIH0gZnJvbSBcIi4uLy4uL3R5cGVzL21lbWJlcnMvZ3VpbGRfbWVtYmVyX2FkZC50c1wiO1xuaW1wb3J0IHsgc25vd2ZsYWtlVG9CaWdpbnQgfSBmcm9tIFwiLi4vLi4vdXRpbC9iaWdpbnQudHNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUd1aWxkTWVtYmVyQWRkKGRhdGE6IERpc2NvcmRHYXRld2F5UGF5bG9hZCkge1xuICBjb25zdCBwYXlsb2FkID0gZGF0YS5kIGFzIEd1aWxkTWVtYmVyQWRkO1xuICBjb25zdCBndWlsZCA9IGF3YWl0IGNhY2hlSGFuZGxlcnMuZ2V0KFxuICAgIFwiZ3VpbGRzXCIsXG4gICAgc25vd2ZsYWtlVG9CaWdpbnQocGF5bG9hZC5ndWlsZElkKSxcbiAgKTtcbiAgaWYgKCFndWlsZCkgcmV0dXJuO1xuXG4gIGd1aWxkLm1lbWJlckNvdW50Kys7XG4gIGNvbnN0IGRpc2NvcmRlbm9NZW1iZXIgPSBhd2FpdCBzdHJ1Y3R1cmVzLmNyZWF0ZURpc2NvcmRlbm9NZW1iZXIoXG4gICAgcGF5bG9hZCxcbiAgICBndWlsZC5pZCxcbiAgKTtcbiAgYXdhaXQgY2FjaGVIYW5kbGVycy5zZXQoXCJtZW1iZXJzXCIsIGRpc2NvcmRlbm9NZW1iZXIuaWQsIGRpc2NvcmRlbm9NZW1iZXIpO1xuXG4gIGV2ZW50SGFuZGxlcnMuZ3VpbGRNZW1iZXJBZGQ/LihndWlsZCwgZGlzY29yZGVub01lbWJlcik7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IlNBQVMsYUFBYSxTQUFRLFlBQWM7U0FDbkMsYUFBYSxTQUFRLGNBQWdCO1NBQ3JDLFVBQVUsU0FBUSx1QkFBeUI7U0FHM0MsaUJBQWlCLFNBQVEsb0JBQXNCO3NCQUVsQyxvQkFBb0IsQ0FBQyxJQUEyQjtVQUM5RCxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUM7VUFDaEIsS0FBSyxTQUFTLGFBQWEsQ0FBQyxHQUFHLEVBQ25DLE1BQVEsR0FDUixpQkFBaUIsQ0FBQyxPQUFPLENBQUMsT0FBTztTQUU5QixLQUFLO0lBRVYsS0FBSyxDQUFDLFdBQVc7VUFDWCxnQkFBZ0IsU0FBUyxVQUFVLENBQUMsc0JBQXNCLENBQzlELE9BQU8sRUFDUCxLQUFLLENBQUMsRUFBRTtVQUVKLGFBQWEsQ0FBQyxHQUFHLEVBQUMsT0FBUyxHQUFFLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxnQkFBZ0I7SUFFeEUsYUFBYSxDQUFDLGNBQWMsR0FBRyxLQUFLLEVBQUUsZ0JBQWdCIn0=