import { eventHandlers } from "../../bot.ts";
import { cacheHandlers } from "../../cache.ts";
import { snowflakeToBigint } from "../../util/bigint.ts";
export async function handleUserUpdate(data) {
    const userData = data.d;
    const member = await cacheHandlers.get("members", snowflakeToBigint(userData.id));
    if (!member) return;
    Object.entries(userData).forEach(([key, value])=>{
        eventHandlers.debug?.("loop", `Running forEach loop in USER_UPDATE file.`);
        // @ts-ignore index signatures
        if (member[key] !== value) return member[key] = value;
    });
    await cacheHandlers.set("members", snowflakeToBigint(userData.id), member);
    eventHandlers.botUpdate?.(userData);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjxodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGlzY29yZGVuby9kaXNjb3JkZW5vL21haW4vc3JjL2hhbmRsZXJzL21pc2MvVVNFUl9VUERBVEUudHM+Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV2ZW50SGFuZGxlcnMgfSBmcm9tIFwiLi4vLi4vYm90LnRzXCI7XG5pbXBvcnQgeyBjYWNoZUhhbmRsZXJzIH0gZnJvbSBcIi4uLy4uL2NhY2hlLnRzXCI7XG5pbXBvcnQgdHlwZSB7IERpc2NvcmRHYXRld2F5UGF5bG9hZCB9IGZyb20gXCIuLi8uLi90eXBlcy9nYXRld2F5L2dhdGV3YXlfcGF5bG9hZC50c1wiO1xuaW1wb3J0IHR5cGUgeyBVc2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3VzZXJzL3VzZXIudHNcIjtcbmltcG9ydCB7IHNub3dmbGFrZVRvQmlnaW50IH0gZnJvbSBcIi4uLy4uL3V0aWwvYmlnaW50LnRzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVVc2VyVXBkYXRlKGRhdGE6IERpc2NvcmRHYXRld2F5UGF5bG9hZCkge1xuICBjb25zdCB1c2VyRGF0YSA9IGRhdGEuZCBhcyBVc2VyO1xuXG4gIGNvbnN0IG1lbWJlciA9IGF3YWl0IGNhY2hlSGFuZGxlcnMuZ2V0KFxuICAgIFwibWVtYmVyc1wiLFxuICAgIHNub3dmbGFrZVRvQmlnaW50KHVzZXJEYXRhLmlkKSxcbiAgKTtcbiAgaWYgKCFtZW1iZXIpIHJldHVybjtcblxuICBPYmplY3QuZW50cmllcyh1c2VyRGF0YSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgZXZlbnRIYW5kbGVycy5kZWJ1Zz8uKFxuICAgICAgXCJsb29wXCIsXG4gICAgICBgUnVubmluZyBmb3JFYWNoIGxvb3AgaW4gVVNFUl9VUERBVEUgZmlsZS5gLFxuICAgICk7XG4gICAgLy8gQHRzLWlnbm9yZSBpbmRleCBzaWduYXR1cmVzXG4gICAgaWYgKG1lbWJlcltrZXldICE9PSB2YWx1ZSkgcmV0dXJuIG1lbWJlcltrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIGF3YWl0IGNhY2hlSGFuZGxlcnMuc2V0KFwibWVtYmVyc1wiLCBzbm93Zmxha2VUb0JpZ2ludCh1c2VyRGF0YS5pZCksIG1lbWJlcik7XG5cbiAgZXZlbnRIYW5kbGVycy5ib3RVcGRhdGU/Lih1c2VyRGF0YSk7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IlNBQVMsYUFBYSxTQUFRLFlBQWM7U0FDbkMsYUFBYSxTQUFRLGNBQWdCO1NBR3JDLGlCQUFpQixTQUFRLG9CQUFzQjtzQkFFbEMsZ0JBQWdCLENBQUMsSUFBMkI7VUFDMUQsUUFBUSxHQUFHLElBQUksQ0FBQyxDQUFDO1VBRWpCLE1BQU0sU0FBUyxhQUFhLENBQUMsR0FBRyxFQUNwQyxPQUFTLEdBQ1QsaUJBQWlCLENBQUMsUUFBUSxDQUFDLEVBQUU7U0FFMUIsTUFBTTtJQUVYLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLE9BQU8sR0FBRyxHQUFHLEVBQUUsS0FBSztRQUMzQyxhQUFhLENBQUMsS0FBSyxJQUNqQixJQUFNLElBQ0wseUNBQXlDO1FBRTVDLEVBQThCLEFBQTlCLDRCQUE4QjtZQUMxQixNQUFNLENBQUMsR0FBRyxNQUFNLEtBQUssU0FBUyxNQUFNLENBQUMsR0FBRyxJQUFJLEtBQUs7O1VBR2pELGFBQWEsQ0FBQyxHQUFHLEVBQUMsT0FBUyxHQUFFLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxFQUFFLEdBQUcsTUFBTTtJQUV6RSxhQUFhLENBQUMsU0FBUyxHQUFHLFFBQVEifQ==