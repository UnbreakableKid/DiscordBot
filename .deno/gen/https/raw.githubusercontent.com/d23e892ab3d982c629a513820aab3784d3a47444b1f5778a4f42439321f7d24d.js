import { eventHandlers } from "../../bot.ts";
import { cacheHandlers } from "../../cache.ts";
import { snowflakeToBigint } from "../../util/bigint.ts";
export async function handleMessageDeleteBulk(data) {
    const payload = data.d;
    const channel = await cacheHandlers.get("channels", snowflakeToBigint(payload.channelId));
    if (!channel) return;
    return Promise.all(payload.ids.map(async (id)=>{
        eventHandlers.messageDelete?.({
            id,
            channel
        }, await cacheHandlers.get("messages", snowflakeToBigint(id)));
        await cacheHandlers.delete("messages", snowflakeToBigint(id));
    }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjxodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGlzY29yZGVuby9kaXNjb3JkZW5vL21haW4vc3JjL2hhbmRsZXJzL21lc3NhZ2VzL01FU1NBR0VfREVMRVRFX0JVTEsudHM+Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV2ZW50SGFuZGxlcnMgfSBmcm9tIFwiLi4vLi4vYm90LnRzXCI7XG5pbXBvcnQgeyBjYWNoZUhhbmRsZXJzIH0gZnJvbSBcIi4uLy4uL2NhY2hlLnRzXCI7XG5pbXBvcnQgdHlwZSB7IERpc2NvcmRHYXRld2F5UGF5bG9hZCB9IGZyb20gXCIuLi8uLi90eXBlcy9nYXRld2F5L2dhdGV3YXlfcGF5bG9hZC50c1wiO1xuaW1wb3J0IHR5cGUgeyBNZXNzYWdlRGVsZXRlQnVsayB9IGZyb20gXCIuLi8uLi90eXBlcy9tZXNzYWdlcy9tZXNzYWdlX2RlbGV0ZV9idWxrLnRzXCI7XG5pbXBvcnQgeyBzbm93Zmxha2VUb0JpZ2ludCB9IGZyb20gXCIuLi8uLi91dGlsL2JpZ2ludC50c1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZURlbGV0ZUJ1bGsoZGF0YTogRGlzY29yZEdhdGV3YXlQYXlsb2FkKSB7XG4gIGNvbnN0IHBheWxvYWQgPSBkYXRhLmQgYXMgTWVzc2FnZURlbGV0ZUJ1bGs7XG4gIGNvbnN0IGNoYW5uZWwgPSBhd2FpdCBjYWNoZUhhbmRsZXJzLmdldChcbiAgICBcImNoYW5uZWxzXCIsXG4gICAgc25vd2ZsYWtlVG9CaWdpbnQocGF5bG9hZC5jaGFubmVsSWQpLFxuICApO1xuICBpZiAoIWNoYW5uZWwpIHJldHVybjtcblxuICByZXR1cm4gUHJvbWlzZS5hbGwocGF5bG9hZC5pZHMubWFwKGFzeW5jIChpZCkgPT4ge1xuICAgIGV2ZW50SGFuZGxlcnMubWVzc2FnZURlbGV0ZT8uKFxuICAgICAgeyBpZCwgY2hhbm5lbCB9LFxuICAgICAgYXdhaXQgY2FjaGVIYW5kbGVycy5nZXQoXCJtZXNzYWdlc1wiLCBzbm93Zmxha2VUb0JpZ2ludChpZCkpLFxuICAgICk7XG4gICAgYXdhaXQgY2FjaGVIYW5kbGVycy5kZWxldGUoXCJtZXNzYWdlc1wiLCBzbm93Zmxha2VUb0JpZ2ludChpZCkpO1xuICB9KSk7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IlNBQVMsYUFBYSxTQUFRLFlBQWM7U0FDbkMsYUFBYSxTQUFRLGNBQWdCO1NBR3JDLGlCQUFpQixTQUFRLG9CQUFzQjtzQkFFbEMsdUJBQXVCLENBQUMsSUFBMkI7VUFDakUsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFDO1VBQ2hCLE9BQU8sU0FBUyxhQUFhLENBQUMsR0FBRyxFQUNyQyxRQUFVLEdBQ1YsaUJBQWlCLENBQUMsT0FBTyxDQUFDLFNBQVM7U0FFaEMsT0FBTztXQUVMLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFFBQVEsRUFBRTtRQUMxQyxhQUFhLENBQUMsYUFBYTtZQUN2QixFQUFFO1lBQUUsT0FBTztpQkFDUCxhQUFhLENBQUMsR0FBRyxFQUFDLFFBQVUsR0FBRSxpQkFBaUIsQ0FBQyxFQUFFO2NBRXBELGFBQWEsQ0FBQyxNQUFNLEVBQUMsUUFBVSxHQUFFLGlCQUFpQixDQUFDLEVBQUUifQ==