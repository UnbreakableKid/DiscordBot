import { bot } from "../../../cache.ts";
import { Embed } from "../../utils/Embed.ts";
import { createCommand } from "../../utils/helpers.ts";
import { getMusicLength } from "../../utils/voice.ts";
createCommand({
  name: "queue",
  guildOnly: true,
  execute(message) {
    const player = bot.lavadenoManager.players.get(message.guildId.toString());
    const queue = bot.musicQueues.get(message.guildId);
    if (!player || !queue) {
      return message.reply(`The bot is not currently playing music`);
    }
    const embed = new Embed().setAuthor(
      `${message.tag}`,
      message.member?.avatarURL,
    ).setTitle("Music Queue").setDescription(
      queue?.length > 0
        ? `Now Playing${
          bot.loopingMusics.has(message.guildId) ? ` 🔁 ` : ""
        }: [${queue[0].info.title}](${queue[0].info.uri}) | ${
          getMusicLength(queue[0].info.length)
        }\n${
          queue.slice(1).map((track, i) => {
            return `${i + 1} - [${track.info.title}](${track.info.uri}) | ${
              getMusicLength(track.info.length)
            }`;
          }).join("\n")
        }`.slice(0, 2048)
        : `The queue is empty, add a music first.`,
    ).setTimestamp(player.timestamp);
    return message.reply({
      embed,
    });
  },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjxmaWxlOi8vL2hvbWUvcnVubmVyL0Rpc2NvcmRCb3Qvc3JjL2NvbW1hbmRzL3ZvaWNlL3F1ZXVlLnRzIzg+Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJvdCB9IGZyb20gXCIuLi8uLi8uLi9jYWNoZS50c1wiO1xuaW1wb3J0IHsgRW1iZWQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvRW1iZWQudHNcIjtcbmltcG9ydCB7IGNyZWF0ZUNvbW1hbmQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaGVscGVycy50c1wiO1xuaW1wb3J0IHsgZ2V0TXVzaWNMZW5ndGggfSBmcm9tIFwiLi4vLi4vdXRpbHMvdm9pY2UudHNcIjtcblxuY3JlYXRlQ29tbWFuZCh7XG4gIG5hbWU6IFwicXVldWVcIixcbiAgZ3VpbGRPbmx5OiB0cnVlLFxuICBleGVjdXRlKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBwbGF5ZXIgPSBib3QubGF2YWRlbm9NYW5hZ2VyLnBsYXllcnMuZ2V0KG1lc3NhZ2UuZ3VpbGRJZC50b1N0cmluZygpKTtcbiAgICBjb25zdCBxdWV1ZSA9IGJvdC5tdXNpY1F1ZXVlcy5nZXQobWVzc2FnZS5ndWlsZElkKTtcblxuICAgIGlmICghcGxheWVyIHx8ICFxdWV1ZSkge1xuICAgICAgcmV0dXJuIG1lc3NhZ2UucmVwbHkoYFRoZSBib3QgaXMgbm90IGN1cnJlbnRseSBwbGF5aW5nIG11c2ljYCk7XG4gICAgfVxuXG4gICAgY29uc3QgZW1iZWQgPSBuZXcgRW1iZWQoKVxuICAgICAgLnNldEF1dGhvcihcbiAgICAgICAgYCR7bWVzc2FnZS50YWd9YCxcbiAgICAgICAgbWVzc2FnZS5tZW1iZXI/LmF2YXRhclVSTCxcbiAgICAgIClcbiAgICAgIC5zZXRUaXRsZShcIk11c2ljIFF1ZXVlXCIpXG4gICAgICAuc2V0RGVzY3JpcHRpb24oXG4gICAgICAgIHF1ZXVlPy5sZW5ndGggPiAwXG4gICAgICAgICAgPyBgTm93IFBsYXlpbmcke1xuICAgICAgICAgICAgYm90Lmxvb3BpbmdNdXNpY3MuaGFzKG1lc3NhZ2UuZ3VpbGRJZCkgPyBgIPCflIEgYCA6IFwiXCJcbiAgICAgICAgICB9OiBbJHtxdWV1ZVswXS5pbmZvLnRpdGxlfV0oJHtxdWV1ZVswXS5pbmZvLnVyaX0pIHwgJHtcbiAgICAgICAgICAgIGdldE11c2ljTGVuZ3RoKHF1ZXVlWzBdLmluZm8ubGVuZ3RoKVxuICAgICAgICAgIH1cXG4ke1xuICAgICAgICAgICAgcXVldWVcbiAgICAgICAgICAgICAgLnNsaWNlKDEpXG4gICAgICAgICAgICAgIC5tYXAoKHRyYWNrLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2kgKyAxfSAtIFske3RyYWNrLmluZm8udGl0bGV9XSgke3RyYWNrLmluZm8udXJpfSkgfCAke1xuICAgICAgICAgICAgICAgICAgZ2V0TXVzaWNMZW5ndGgodHJhY2suaW5mby5sZW5ndGgpXG4gICAgICAgICAgICAgICAgfWA7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpXG4gICAgICAgICAgfWAuc2xpY2UoMCwgMjA0OClcbiAgICAgICAgICA6IGBUaGUgcXVldWUgaXMgZW1wdHksIGFkZCBhIG11c2ljIGZpcnN0LmAsXG4gICAgICApXG4gICAgICAuc2V0VGltZXN0YW1wKHBsYXllci50aW1lc3RhbXApO1xuXG4gICAgcmV0dXJuIG1lc3NhZ2UucmVwbHkoeyBlbWJlZCB9KTtcbiAgfSxcbn0pO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJTQUFTLEdBQUcsU0FBUSxpQkFBbUI7U0FDOUIsS0FBSyxTQUFRLG9CQUFzQjtTQUNuQyxhQUFhLFNBQVEsc0JBQXdCO1NBQzdDLGNBQWMsU0FBUSxvQkFBc0I7QUFFckQsYUFBYTtJQUNYLElBQUksR0FBRSxLQUFPO0lBQ2IsU0FBUyxFQUFFLElBQUk7SUFDZixPQUFPLEVBQUMsT0FBTztjQUNQLE1BQU0sR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRO2NBQ2pFLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTzthQUU1QyxNQUFNLEtBQUssS0FBSzttQkFDWixPQUFPLENBQUMsS0FBSyxFQUFFLHNDQUFzQzs7Y0FHeEQsS0FBSyxPQUFPLEtBQUssR0FDcEIsU0FBUyxJQUNMLE9BQU8sQ0FBQyxHQUFHLElBQ2QsT0FBTyxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBRTFCLFFBQVEsRUFBQyxXQUFhLEdBQ3RCLGNBQWMsQ0FDYixLQUFLLEVBQUUsTUFBTSxHQUFHLENBQUMsSUFDWixXQUFXLEVBQ1osR0FBRyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sS0FBSyxNQUFHLE9BQzlDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQ2xELGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQ3BDLEVBQUUsRUFDRCxLQUFLLENBQ0YsS0FBSyxDQUFDLENBQUMsRUFDUCxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUM7c0JBQ0YsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksRUFDNUQsY0FBYyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTTtXQUduQyxJQUFJLEVBQUMsRUFBSSxLQUNYLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxLQUNiLHNDQUFzQyxHQUU1QyxZQUFZLENBQUMsTUFBTSxDQUFDLFNBQVM7ZUFFekIsT0FBTyxDQUFDLEtBQUs7WUFBRyxLQUFLIn0=
